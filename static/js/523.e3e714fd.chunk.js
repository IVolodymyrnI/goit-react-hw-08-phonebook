"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[523],{3523:function(e,n,r){r.r(n),r.d(n,{default:function(){return X}});var t=r(8348),s=r(176),a=r(4224),i=r(5048),c=r(3541),o=r(9439),u=r(2791),d=r(9229),l=r(5218),m=r(4903),h=r(3329),f=function(e){var n=e.id,r=e.name,t=e.number,i=(0,m.Nt)(),f=(0,o.Z)(i,2),x=f[0],j=f[1],p=j.isLoading,b=j.isSuccess,v=j.isError,g=j.error;return(0,u.useEffect)((function(){v&&l.Am.error(g)}),[g,v]),(0,u.useEffect)((function(){b&&(0,l.Am)("The contact has been deleted!",{icon:"\ud83d\uddd1\ufe0f"})}),[b]),(0,h.jsx)(h.Fragment,{children:!b&&(0,h.jsx)(c.HC,{mb:4,children:(0,h.jsxs)(s.k,{alignItems:"center",children:[(0,h.jsxs)(d.x,{fontSize:24,fontWeight:500,mr:4,children:[r,": ",t]}),(0,h.jsx)(a.z,{type:"button",onClick:function(){return x(n)},isLoading:p,children:"X"})]})},n)})},x=function(e){return e.filter};function j(){var e=(0,m.Jx)().data,n=(0,i.v9)(x);if(!e)return null;var r=e.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));return(0,h.jsx)(h.Fragment,{children:e&&(0,h.jsx)(c.QI,{styleType:"none",children:r.map((function(e){var n=e.id,r=e.name,t=e.number;return(0,h.jsx)(f,{id:n,name:r,number:t},n)}))})})}var p=r(1413),b=r(1134),v=r(4087),g=r(2392),C=r(9140),w=r(1634);function k(){var e=(0,i.I0)(),n=(0,b.cI)(),r=n.register,t=(0,n.watch)("searchName","");return(0,u.useEffect)((function(){e((0,w.Tv)(t))}),[e,t]),(0,h.jsx)(v.xu,{width:200,mr:4,children:(0,h.jsx)("form",{children:(0,h.jsx)(g.NI,{children:(0,h.jsx)(C.I,(0,p.Z)({placeholder:"Search",defaultValue:""},r("searchName")))})})})}var y=r(1820),A=r(3380),I=r(8789),Z=r(7693),N=r(1461),z=r(7521),L=r(5861),S=r(4687),E=r.n(S),F=r(8208),_=r(4125),J=r(4695),O=function(e){var n=e.array,r=void 0===n?[]:n,t=e.name,s=r.map((function(e){return e.name.toLowerCase()})).indexOf(t.toLowerCase());return!Boolean(-1===s)},T=r(8007),q=(0,T.Ry)({name:(0,T.Z_)().required("Name is a required field").matches("^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$","Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan."),number:(0,T.Z_)().required("Phone number is a required field").matches(/^\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}$/,"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +")}),V=function(e){var n=e.onClose,r=(0,m.Jx)(),t=r.data,i=r.isFetching,c=(0,m.Tn)(),d=(0,o.Z)(c,2),f=d[0],x=d[1],j=x.isError,v=x.error,w=x.isLoading,k=x.isSuccess,y=(0,b.cI)({resolver:(0,J.X)(q)}),A=y.register,I=y.handleSubmit,Z=y.reset,N=y.formState.errors,z=w||i,S=function(){var e=(0,L.Z)(E().mark((function e(r){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O({array:t,name:r.name})){e.next=3;break}return e.abrupt("return",l.Am.error("The name of the contacted is already exist!"));case 3:return e.prev=3,e.next=6,f(r);case 6:z||(Z(),n()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),l.Am.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(n){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){j&&l.Am.error(v)}),[v,j]),(0,u.useEffect)((function(){k&&l.Am.success("The contact has been added!")}),[k]),(0,h.jsxs)("form",{onSubmit:I(S),children:[(0,h.jsx)(g.NI,{isInvalid:N.name,children:(0,h.jsxs)(F.l,{htmlFor:"name",children:["Name",(0,h.jsx)(C.I,(0,p.Z)({placeholder:"John",defaultValue:"",type:"text",name:"name"},A("name"))),(0,h.jsx)(_.J1,{children:N.name&&N.name.message})]})}),(0,h.jsx)(g.NI,{isInvalid:N.number,children:(0,h.jsxs)(F.l,{htmlFor:"number",children:["Number",(0,h.jsx)(C.I,(0,p.Z)({defaultValue:"",type:"tel",name:"number",placeholder:"380-972-121-34"},A("number"))),(0,h.jsx)(_.J1,{children:N.number&&N.number.message})]})}),(0,h.jsx)(s.k,{justify:"center",mt:4,children:(0,h.jsx)(a.z,{type:"submit",isLoading:z,children:"Submit"})})]})};function B(e){var n=e.isOpen,r=e.onClose;return(0,h.jsxs)(y.u_,{isOpen:n,onClose:r,children:[(0,h.jsx)(A.Z,{}),(0,h.jsxs)(I.h,{p:8,width:350,children:[(0,h.jsx)(Z.x,{textAlign:"center",p:4,children:"Add a new contact"}),(0,h.jsx)(N.o,{}),(0,h.jsx)(z.f,{p:4,children:(0,h.jsx)(V,{onClose:r})})]})]})}var P=function(){var e=(0,t.q)(),n=e.onOpen,r=e.isOpen,i=e.onClose;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(s.k,{mb:12,children:[(0,h.jsx)(k,{}),(0,h.jsx)(B,{isOpen:r,onClose:i}),(0,h.jsx)(a.z,{onClick:n,children:"New"})]}),(0,h.jsx)(j,{})]})};function X(){return(0,h.jsx)(P,{})}}}]);
//# sourceMappingURL=523.e3e714fd.chunk.js.map